<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="./jquery-1.11.3.min.js"></script>
</head>
<body>
	<input type="text" id="msg">
	<button class="btn" disabled>发送</button>
	<div class="msgbox"></div>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var btn = document.querySelector('.btn')
		var msgContent = document.querySelector('#msg')
		var msgbox = document.querySelector('.msgbox')
		var socket = io.connect('http://60.205.226.213');
		socket.on('connect',function(){
			btn.removeAttribute('disabled')
		})
		socket.on('putMsg',function(data){
			console.log(data);
			putMsg(data.msg)
		})
		btn.addEventListener('click',function(){
			var msg = msgContent.value
			if(msg === '') return false
			putMsg(msg)
			socket.send(msg)
			msgContent.value = ''
		})
		function putMsg(msg){
			var p = document.createElement('p')
			p.innerHTML = msg
			msgbox.appendChild(p)
		}
	</script>
</body>
</html>